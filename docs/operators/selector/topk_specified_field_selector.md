# topk_specified_field_selector

Selects top samples based on the sorted values of a specified field.

This operator selects the top samples from a dataset based on the values of a specified field. The field can be multi-level, with keys separated by dots. The selection is based on either a specified ratio of the dataset or a fixed number of top samples. If both `top_ratio` and `topk` are provided, the one resulting in fewer samples is used. The sorting order can be ascending or descending, controlled by the `reverse` parameter. The key metric is the value of the specified field, and the operator uses this to determine which samples to keep.

æ ¹æ®æŒ‡å®šå­—æ®µçš„æ’åºå€¼é€‰æ‹©é¡¶éƒ¨æ ·æœ¬ã€‚

è¯¥ç®—å­æ ¹æ®æŒ‡å®šå­—æ®µçš„å€¼ä»æ•°æ®é›†ä¸­é€‰æ‹©é¡¶éƒ¨æ ·æœ¬ã€‚å­—æ®µå¯ä»¥æ˜¯å¤šçº§çš„ï¼Œé”®ä¹‹é—´ç”¨ç‚¹åˆ†éš”ã€‚é€‰æ‹©åŸºäºæ•°æ®é›†çš„æŒ‡å®šæ¯”ä¾‹æˆ–å›ºå®šæ•°é‡çš„é¡¶éƒ¨æ ·æœ¬ã€‚å¦‚æœåŒæ—¶æä¾›äº† `top_ratio` å’Œ `topk`ï¼Œåˆ™ä½¿ç”¨å¯¼è‡´æ ·æœ¬æ•°é‡è¾ƒå°‘çš„é‚£ä¸ªã€‚æ’åºé¡ºåºå¯ä»¥æ˜¯å‡åºæˆ–é™åºï¼Œç”± `reverse` å‚æ•°æ§åˆ¶ã€‚å…³é”®æŒ‡æ ‡æ˜¯æŒ‡å®šå­—æ®µçš„å€¼ï¼Œè¯¥ç®—å­ä½¿ç”¨æ­¤å€¼æ¥ç¡®å®šä¿ç•™å“ªäº›æ ·æœ¬ã€‚

Type ç®—å­ç±»å‹: **selector**

Tags æ ‡ç­¾: cpu

## ğŸ”§ Parameter Configuration å‚æ•°é…ç½®
| name å‚æ•°å | type ç±»å‹ | default é»˜è®¤å€¼ | desc è¯´æ˜ |
|--------|------|--------|------|
| `field_key` | <class 'str'> | `''` | Selector based on the specified value |
| `top_ratio` | typing.Optional[typing.Annotated[float, FieldInfo(annotation=NoneType, required=True, metadata=[Ge(ge=0), Le(le=1)])]] | `None` | Ratio of selected top samples, samples will be |
| `topk` | typing.Optional[typing.Annotated[int, Gt(gt=0)]] | `None` | Number of selected top sample, samples will be |
| `reverse` | <class 'bool'> | `True` | Determine the sorting rule, if reverse=True, |
| `args` |  | `''` | extra args |
| `kwargs` |  | `''` | extra args |

## ğŸ“Š Effect demonstration æ•ˆæœæ¼”ç¤º
### test_topratio_select
```python
TopkSpecifiedFieldSelector(field_key='meta.key1.key2.count', top_ratio=0.2, topk=5, reverse=True)
```

#### ğŸ“¥ input data è¾“å…¥æ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">Today is Sun</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>101</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 34}, &#x27;count&#x27;: 5}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">a v s e c s f e f g a a a  </pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>16</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.docx&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 243}, &#x27;count&#x27;: 63}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä¸­æ–‡ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç®—ä¸€ä¸ªé•¿åº¦</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>162</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.txt&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: None}, &#x27;count&#x27;: 23}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ï¼Œã€‚ã€â€â€â€œÂ«Â»ï¼‘ã€ã€Œã€Šã€‹Â´âˆ¶ï¼šï¼Ÿï¼</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.html&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 18}, &#x27;count&#x27;: 48}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 5:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä»–çš„è‹±æ–‡åå­—å«Harry Potter</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>88</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 551}, &#x27;count&#x27;: 78}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 6:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.py&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 89}, &#x27;count&#x27;: 3}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 7:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">æˆ‘å‡ºç”Ÿäº2023å¹´12æœˆ15æ—¥</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.java&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 354.32}, &#x27;count&#x27;: 67}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 8:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">emojiè¡¨æƒ…æµ‹è¯•ä¸‹ğŸ˜Šï¼ŒğŸ˜¸31231
</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>2</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.html&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 354.32}, &#x27;count&#x27;: 32}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 9:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">a=1
b
c=1+2+3+5
d=6</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>178</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 33}, &#x27;count&#x27;: 33}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 10:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä½¿ç”¨ç‰‡æ®µåˆ†è¯å™¨å¯¹æ¯ä¸ªé¡µé¢è¿›è¡Œåˆ†è¯ï¼Œä½¿ç”¨è¯­è¨€</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>666</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.xml&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 18}, &#x27;count&#x27;: 48}}</td></tr></table></div></div>

#### ğŸ“¤ output data è¾“å‡ºæ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä»–çš„è‹±æ–‡åå­—å«Harry Potter</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>88</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 551}, &#x27;count&#x27;: 78}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">æˆ‘å‡ºç”Ÿäº2023å¹´12æœˆ15æ—¥</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.java&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 354.32}, &#x27;count&#x27;: 67}}</td></tr></table></div></div>

#### âœ¨ explanation è§£é‡Š
The operator selects the top 20% of samples based on the 'meta.key1.key2.count' field, in descending order. The target list contains the two highest values for this field (551 and 354.32).
ç®—å­æ ¹æ®'meta.key1.key2.count'å­—æ®µï¼ŒæŒ‰é™åºé€‰æ‹©å‰20%çš„æ ·æœ¬ã€‚ç›®æ ‡åˆ—è¡¨åŒ…å«äº†è¯¥å­—æ®µå€¼æœ€é«˜çš„ä¸¤ä¸ªæ ·æœ¬ï¼ˆ551å’Œ354.32ï¼‰ã€‚

### test_reverse_select
```python
TopkSpecifiedFieldSelector(field_key='meta.key1.key2.count', top_ratio=0.5, topk=3, reverse=False)
```

#### ğŸ“¥ input data è¾“å…¥æ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">Today is Sun</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>101</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 34}, &#x27;count&#x27;: 5}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">a v s e c s f e f g a a a  </pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>16</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.docx&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 243}, &#x27;count&#x27;: 63}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä¸­æ–‡ä¹Ÿæ˜¯ä¸€ä¸ªå­—ç®—ä¸€ä¸ªé•¿åº¦</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>162</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.txt&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: None}, &#x27;count&#x27;: 23}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ï¼Œã€‚ã€â€â€â€œÂ«Â»ï¼‘ã€ã€Œã€Šã€‹Â´âˆ¶ï¼šï¼Ÿï¼</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.html&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 18}, &#x27;count&#x27;: 48}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 5:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä»–çš„è‹±æ–‡åå­—å«Harry Potter</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>88</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 551}, &#x27;count&#x27;: 78}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 6:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.py&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 89}, &#x27;count&#x27;: 3}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 7:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">æˆ‘å‡ºç”Ÿäº2023å¹´12æœˆ15æ—¥</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.java&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 354.32}, &#x27;count&#x27;: 67}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 8:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">emojiè¡¨æƒ…æµ‹è¯•ä¸‹ğŸ˜Šï¼ŒğŸ˜¸31231
</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>2</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.html&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 354.32}, &#x27;count&#x27;: 32}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 9:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">a=1
b
c=1+2+3+5
d=6</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>178</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 33}, &#x27;count&#x27;: 33}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 10:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä½¿ç”¨ç‰‡æ®µåˆ†è¯å™¨å¯¹æ¯ä¸ªé¡µé¢è¿›è¡Œåˆ†è¯ï¼Œä½¿ç”¨è¯­è¨€</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>666</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.xml&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 2}, &#x27;count&#x27;: 48}}</td></tr></table></div></div>

#### ğŸ“¤ output data è¾“å‡ºæ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ä½¿ç”¨ç‰‡æ®µåˆ†è¯å™¨å¯¹æ¯ä¸ªé¡µé¢è¿›è¡Œåˆ†è¯ï¼Œä½¿ç”¨è¯­è¨€</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>666</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.xml&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 2}, &#x27;count&#x27;: 48}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ï¼Œã€‚ã€â€â€â€œÂ«Â»ï¼‘ã€ã€Œã€Šã€‹Â´âˆ¶ï¼šï¼Ÿï¼</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>None</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.html&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 18}, &#x27;count&#x27;: 48}}</td></tr></table></div></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">a=1
b
c=1+2+3+5
d=6</pre><div class='meta' style='margin-top:6px;'><table style='border-collapse:collapse; margin-top:6px;'><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>count</td><td style='padding:4px 8px;'>178</td></tr><tr><td style='padding:4px 8px; color:#555; white-space:nowrap;'>meta</td><td style='padding:4px 8px;'>{&#x27;suffix&#x27;: &#x27;.pdf&#x27;, &#x27;key1&#x27;: {&#x27;key2&#x27;: {&#x27;count&#x27;: 33}, &#x27;count&#x27;: 33}}</td></tr></table></div></div>

#### âœ¨ explanation è§£é‡Š
The operator selects the bottom 50% or 3 samples (whichever is fewer) based on the 'meta.key1.key2.count' field, in ascending order. The target list contains the three lowest non-null values for this field (2, 18, and 33).
ç®—å­æ ¹æ®'meta.key1.key2.count'å­—æ®µï¼ŒæŒ‰å‡åºé€‰æ‹©å50%æˆ–3ä¸ªæ ·æœ¬ï¼ˆå–è¾ƒå°‘è€…ï¼‰ã€‚ç›®æ ‡åˆ—è¡¨åŒ…å«äº†è¯¥å­—æ®µä¸­æœ€ä½çš„ä¸‰ä¸ªéç©ºå€¼ï¼ˆ2ã€18å’Œ33ï¼‰ã€‚


## ğŸ”— related links ç›¸å…³é“¾æ¥
- [source code æºä»£ç ](../../../data_juicer/ops/selector/topk_specified_field_selector.py)
- [unit test å•å…ƒæµ‹è¯•](../../../tests/ops/selector/test_topk_specified_field_selector.py)
- [Return operator list è¿”å›ç®—å­åˆ—è¡¨](../../Operators.md)