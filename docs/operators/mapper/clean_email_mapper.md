# clean_email_mapper

Cleans email addresses from text samples using a regular expression.

This operator removes or replaces email addresses in the text based on a regular expression pattern. By default, it uses a standard pattern to match email addresses, but a custom pattern can be provided. The matched email addresses are replaced with a specified replacement string, which defaults to an empty string. The operation is applied to each text sample in the batch. If no email address is found in a sample, it remains unchanged.

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ä»æ–‡æœ¬æ ·æœ¬ä¸­æ¸…ç†ç”µå­é‚®ä»¶åœ°å€ã€‚

æ­¤ç®—å­åŸºäºæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åˆ é™¤æˆ–æ›¿æ¢æ–‡æœ¬ä¸­çš„ç”µå­é‚®ä»¶åœ°å€ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä½¿ç”¨æ ‡å‡†æ¨¡å¼åŒ¹é…ç”µå­é‚®ä»¶åœ°å€ï¼Œä½†å¯ä»¥æä¾›è‡ªå®šä¹‰æ¨¡å¼ã€‚åŒ¹é…åˆ°çš„ç”µå­é‚®ä»¶åœ°å€å°†è¢«æ›¿æ¢ä¸ºæŒ‡å®šçš„æ›¿æ¢å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸ºç©ºå­—ç¬¦ä¸²ã€‚è¯¥æ“ä½œåº”ç”¨äºæ‰¹æ¬¡ä¸­çš„æ¯ä¸ªæ–‡æœ¬æ ·æœ¬ã€‚å¦‚æœæ ·æœ¬ä¸­æ²¡æœ‰æ‰¾åˆ°ç”µå­é‚®ä»¶åœ°å€ï¼Œåˆ™ä¿æŒä¸å˜ã€‚

Type ç®—å­ç±»å‹: **mapper**

Tags æ ‡ç­¾: cpu, text

## ğŸ”§ Parameter Configuration å‚æ•°é…ç½®
| name å‚æ•°å | type ç±»å‹ | default é»˜è®¤å€¼ | desc è¯´æ˜ |
|--------|------|--------|------|
| `pattern` | typing.Optional[str] | `None` | regular expression pattern to search for within text. |
| `repl` | <class 'str'> | `''` | replacement string, default is empty string. |
| `args` |  | `''` | extra args |
| `kwargs` |  | `''` | extra args |

## ğŸ“Š Effect demonstration æ•ˆæœæ¼”ç¤º
### test_clean_email
```python
CleanEmailMapper()
```

#### ğŸ“¥ input data è¾“å…¥æ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">happy day euqdh@cjqi.com</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ftp://examplema-niÃ¨rdash@hqbchd.ckdhnfes.cds</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ğŸ‘Š23da44sh12@46hqb12chd.ckdhnfes.comd.dasd.asd.dc</pre></div>

#### ğŸ“¤ output data è¾“å‡ºæ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">happy day </pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ftp://examplema-niÃ¨</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ğŸ‘Š</pre></div>

#### âœ¨ explanation è§£é‡Š
This example demonstrates the default behavior of the CleanEmailMapper, which removes email addresses from the text. The operator uses a regular expression to identify and remove any email addresses found in the 'text' field. In the provided samples, emails like 'euqdh@cjqi.com' and 'rdash@hqbchd.ckdhnfes.cds' are removed, leaving only the non-email parts of the text. The sample with no valid email address ('è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om') remains unchanged.
è¿™ä¸ªä¾‹å­å±•ç¤ºäº†CleanEmailMapperçš„é»˜è®¤è¡Œä¸ºï¼Œå³ä»æ–‡æœ¬ä¸­ç§»é™¤ç”µå­é‚®ä»¶åœ°å€ã€‚ç®—å­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¯†åˆ«å¹¶ç§»é™¤'text'å­—æ®µä¸­çš„ä»»ä½•ç”µå­é‚®ä»¶åœ°å€ã€‚åœ¨æä¾›çš„æ ·æœ¬ä¸­ï¼Œåƒ'euqdh@cjqi.com'å’Œ'rdash@hqbchd.ckdhnfes.cds'è¿™æ ·çš„ç”µå­é‚®ä»¶è¢«ç§»é™¤ï¼Œåªç•™ä¸‹æ–‡æœ¬ä¸­çš„éç”µå­é‚®ä»¶éƒ¨åˆ†ã€‚æ²¡æœ‰æœ‰æ•ˆç”µå­é‚®ä»¶åœ°å€çš„æ ·æœ¬ï¼ˆ'è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om'ï¼‰ä¿æŒä¸å˜ã€‚

### test_replace_email
```python
CleanEmailMapper(repl='<EMAIL>')
```

#### ğŸ“¥ input data è¾“å…¥æ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">happy day euqdh@cjqi.com</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ftp://examplema-niÃ¨rdash@hqbchd.ckdhnfes.cds</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ğŸ‘Š23da44sh12@46hqb12chd.ckdhnfes.comd.dasd.asd.dc</pre></div>

#### ğŸ“¤ output data è¾“å‡ºæ•°æ®
<div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 1:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">happy day &lt;EMAIL&gt;</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 2:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">è¯·é—®ä½ æ˜¯è°dasoidhao@1264fg.45om</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 3:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ftp://examplema-niÃ¨&lt;EMAIL&gt;</pre></div><div class="sample-card" style="border:1px solid #ddd; padding:12px; margin:8px 0; border-radius:6px; background:#fafafa; box-shadow:0 1px 3px rgba(0,0,0,0.1);"><div class="sample-header" style="background:#f8f9fa; padding:4px 8px; margin-bottom:6px; border-radius:3px; font-size:0.9em; color:#666; border-left:3px solid #007acc;"><strong>Sample 4:</strong> text</div><pre style="padding:6px; background:#f6f8fa; border-radius:4px; overflow-x:auto; white-space:pre; word-wrap:normal;">ğŸ‘Š&lt;EMAIL&gt;</pre></div>

#### âœ¨ explanation è§£é‡Š
In this case, the CleanEmailMapper is configured to replace email addresses with a specific string '<EMAIL>' instead of removing them. The operator identifies email addresses using a regular expression and replaces each found email with the specified replacement string. This way, the original structure of the sentences is maintained, but all email addresses are replaced with '<EMAIL>'. For instance, 'euqdh@cjqi.com' is replaced by '<EMAIL>', and 'rdash@hqbchd.ckdhnfes.cds' is also replaced by the same string. The sample that does not contain a valid email address remains as it is.
åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒCleanEmailMapperè¢«é…ç½®ä¸ºç”¨ç‰¹å®šå­—ç¬¦ä¸²'<EMAIL>'æ›¿æ¢ç”µå­é‚®ä»¶åœ°å€è€Œä¸æ˜¯ç§»é™¤å®ƒä»¬ã€‚ç®—å­ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯†åˆ«ç”µå­é‚®ä»¶åœ°å€ï¼Œå¹¶å°†æ¯ä¸ªæ‰¾åˆ°çš„ç”µå­é‚®ä»¶æ›¿æ¢ä¸ºæŒ‡å®šçš„æ›¿æ¢å­—ç¬¦ä¸²ã€‚è¿™æ ·ï¼Œå¥å­çš„åŸå§‹ç»“æ„å¾—ä»¥ä¿ç•™ï¼Œä½†æ‰€æœ‰ç”µå­é‚®ä»¶åœ°å€éƒ½è¢«æ›¿æ¢æˆäº†'<EMAIL>'ã€‚ä¾‹å¦‚ï¼Œ'euqdh@cjqi.com'è¢«æ›¿æ¢ä¸º'<EMAIL>'ï¼Œè€Œ'rdash@hqbchd.ckdhnfes.cds'ä¹Ÿè¢«æ›¿æ¢ä¸ºç›¸åŒçš„å­—ç¬¦ä¸²ã€‚ä¸å«æœ‰æ•ˆç”µå­é‚®ä»¶åœ°å€çš„æ ·æœ¬ä¿æŒä¸å˜ã€‚


## ğŸ”— related links ç›¸å…³é“¾æ¥
- [source code æºä»£ç ](../../../data_juicer/ops/mapper/clean_email_mapper.py)
- [unit test å•å…ƒæµ‹è¯•](../../../tests/ops/mapper/test_clean_email_mapper.py)
- [Return operator list è¿”å›ç®—å­åˆ—è¡¨](../../Operators.md)