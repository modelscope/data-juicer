project_name: 'performance-benchmark-text-c4-ray'
dataset_path: 'perf_bench_data/text/c4-train.00000-of-01024.jsonl'
export_path: 'outputs/performance_benchmark_text_c4_ray/res.jsonl'
use_cache: false

executor_type: ray
ray_address: "auto"

# Process pipeline with real DataJuicer operations
process:
  # Text cleaning operations
  - clean_links_mapper:
      text_key: "text"
      min_links: 0
      max_links: 10

  - clean_email_mapper:
      text_key: "text"
      min_emails: 0
      max_emails: 5

  - whitespace_normalization_mapper:
      text_key: "text"

  - fix_unicode_mapper:
      text_key: "text"

  # Text filtering operations
  - text_length_filter:
      text_key: "text"
      min_len: 5
      max_len: 10000

  - alphanumeric_filter:
      text_key: "text"
      min_ratio: 0.1

  # Quality filtering
  - character_repetition_filter:
      text_key: "text"
      min_ratio: 0.0
      max_ratio: 0.5

  - word_repetition_filter:
      text_key: "text"
      min_ratio: 0.0
      max_ratio: 0.5

  # Deduplication
  - ray_bts_minhash_deduplicator:
      text_key: "text"
      tokenization: "space"
      window_size: 5
      lowercase: false
      jaccard_threshold: 0.7
      num_permutations: 256



# Export configuration
export_in_parallel: true
keep_stats_in_res_ds: true
keep_hashes_in_res_ds: true
