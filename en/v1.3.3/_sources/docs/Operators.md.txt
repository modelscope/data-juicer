
# Operator Schemas ç®—å­æè¦

Operators are a collection of basic processes that assist in data modification,
cleaning, filtering, deduplication, etc. We support a wide range of data
sources and file formats, and allow for flexible extension to custom datasets.

ç®—å­ (Operator) æ˜¯ååŠ©æ•°æ®ä¿®æ”¹ã€æ¸…ç†ã€è¿‡æ»¤ã€å»é‡ç­‰åŸºæœ¬æµç¨‹çš„é›†åˆã€‚æˆ‘ä»¬æ”¯æŒå¹¿æ³›çš„æ•°æ®æ¥æºå’Œæ–‡ä»¶æ ¼å¼ï¼Œå¹¶æ”¯æŒå¯¹è‡ªå®šä¹‰æ•°æ®é›†çš„çµæ´»æ‰©å±•ã€‚

This page offers a basic description of the operators (OPs) in Data-Juicer.
Users can refer to the
[API documentation](https://modelscope.github.io/data-juicer/) for the specific
parameters of each operator. Users can refer to and run the unit tests
(`tests/ops/...`) for [examples of operator-wise usage](../tests/ops) as well
as the effects of each operator when applied to built-in test data samples.
Besides, you can try to use agent to automatically route suitable OPs and
call them. E.g., refer to
[Agentic Filters of DJ](../demos/api_service/react_data_filter_process.ipynb),
 [Agentic Mappers of DJ](../demos/api_service/react_data_mapper_process.ipynb)

è¿™ä¸ªé¡µé¢æä¾›äº†OPçš„åŸºæœ¬æè¿°ï¼Œç”¨æˆ·å¯ä»¥å‚è€ƒ[APIæ–‡æ¡£](https://modelscope.github.io/data-juicer/)æ›´ç»†è‡´äº†è§£æ¯ä¸ª
OPçš„å…·ä½“å‚æ•°ï¼Œå¹¶ä¸”å¯ä»¥æŸ¥çœ‹ã€è¿è¡Œå•å…ƒæµ‹è¯• (`tests/ops/...`)ï¼Œæ¥ä½“éªŒ
[å„OPçš„ç”¨æ³•ç¤ºä¾‹](../tests/ops)ä»¥åŠæ¯ä¸ªOPä½œç”¨äºå†…ç½®æµ‹è¯•æ•°æ®æ ·æœ¬æ—¶çš„æ•ˆæœã€‚ä¾‹å¦‚ï¼Œå‚è€ƒ
[Agentic Filters of DJ](../demos/api_service/react_data_filter_process.ipynb),
 [Agentic Mappers of DJ](../demos/api_service/react_data_mapper_process.ipynb)


## Overview  æ¦‚è§ˆ

The operators in Data-Juicer are categorized into 7 types.
Data-Juicer ä¸­çš„ç®—å­åˆ†ä¸ºä»¥ä¸‹ 7 ç§ç±»å‹ã€‚

| Type ç±»å‹ | Number æ•°é‡ | Description æè¿° |
|------|:------:|-------------|
| [aggregator](#aggregator) | 4 | Aggregate for batched samples, such as summary or conclusion. å¯¹æ‰¹é‡æ ·æœ¬è¿›è¡Œæ±‡æ€»ï¼Œå¦‚å¾—å‡ºæ€»ç»“æˆ–ç»“è®ºã€‚ |
| [deduplicator](#deduplicator) | 10 | Detects and removes duplicate samples. è¯†åˆ«ã€åˆ é™¤é‡å¤æ ·æœ¬ã€‚ |
| [filter](#filter) | 47 | Filters out low-quality samples. è¿‡æ»¤ä½è´¨é‡æ ·æœ¬ã€‚ |
| [formatter](#formatter) | 8 | Discovers, loads, and canonicalizes source data. å‘ç°ã€åŠ è½½ã€è§„èŒƒåŒ–åŸå§‹æ•°æ®ã€‚ |
| [grouper](#grouper) | 3 | Group samples to batched samples. å°†æ ·æœ¬åˆ†ç»„ï¼Œæ¯ä¸€ç»„ç»„æˆä¸€ä¸ªæ‰¹é‡æ ·æœ¬ã€‚ |
| [mapper](#mapper) | 80 | Edits and transforms samples. å¯¹æ•°æ®æ ·æœ¬è¿›è¡Œç¼–è¾‘å’Œè½¬æ¢ã€‚ |
| [selector](#selector) | 5 | Selects top samples based on ranking. åŸºäºæ’åºé€‰å–é«˜è´¨é‡æ ·æœ¬ã€‚ |

All the specific operators are listed below, each featured with several capability tags. 
ä¸‹é¢åˆ—å‡ºæ‰€æœ‰å…·ä½“ç®—å­ï¼Œæ¯ç§ç®—å­éƒ½é€šè¿‡å¤šä¸ªæ ‡ç­¾æ¥æ³¨æ˜å…¶ä¸»è¦åŠŸèƒ½ã€‚
* Modality Tags
  - ğŸ”¤Text: process text data specifically. ä¸“ç”¨äºå¤„ç†æ–‡æœ¬ã€‚
  - ğŸImage: process image data specifically. ä¸“ç”¨äºå¤„ç†å›¾åƒã€‚
  - ğŸ“£Audio: process audio data specifically. ä¸“ç”¨äºå¤„ç†éŸ³é¢‘ã€‚
  - ğŸ¬Video: process video data specifically. ä¸“ç”¨äºå¤„ç†è§†é¢‘ã€‚
  - ğŸ”®Multimodal: process multimodal data. ç”¨äºå¤„ç†å¤šæ¨¡æ€æ•°æ®ã€‚
* Resource Tags
  - ğŸ’»CPU: only requires CPU resource. åªéœ€è¦ CPU èµ„æºã€‚
  - ğŸš€GPU: requires GPU/CUDA resource as well. é¢å¤–éœ€è¦ GPU/CUDA èµ„æºã€‚
* Usability Tags
  - ğŸ”´Alpha: alpha version OP. Only the basic OP implementations are finished. è¡¨ç¤º alpha ç‰ˆæœ¬ç®—å­ã€‚åªå®Œæˆäº†åŸºç¡€çš„ç®—å­å®ç°ã€‚
  - ğŸŸ¡Beta: beta version OP. Based on the alpha version, unittests for this OP are added as well. è¡¨ç¤º beta ç‰ˆæœ¬ç®—å­ã€‚åŸºäº alpha ç‰ˆæœ¬ï¼Œæ·»åŠ äº†ç®—å­çš„å•å…ƒæµ‹è¯•ã€‚
  - ğŸŸ¢Stable: stable version OP. Based on the beta version, OP optimizations related to DJ (e.g. model management, batched processing, OP fusion, ...) are added to this OP. è¡¨ç¤º stable ç‰ˆæœ¬ç®—å­ã€‚åŸºäº beta ç‰ˆæœ¬ï¼Œå®Œå–„äº†DJç›¸å…³çš„ç®—å­ä¼˜åŒ–é¡¹ï¼ˆå¦‚æ¨¡å‹ç®¡ç†ï¼Œæ‰¹å¤„ç†ï¼Œç®—å­èåˆç­‰ï¼‰ã€‚
* Model Tags
  - ğŸ”—API: equipped with API-based models. (e.g. ChatGPT, GPT-4o). æ”¯æŒåŸºäº API è°ƒç”¨æ¨¡å‹ï¼ˆå¦‚ ChatGPTï¼ŒGPT-4oï¼‰ã€‚
  - ğŸŒŠvLLM: equipped with models supported by vLLM. æ”¯æŒåŸºäº vLLM è¿›è¡Œæ¨¡å‹æ¨ç†ã€‚
  - ğŸ§©HF: equipped with models from HuggingFace Hub. æ”¯æŒæ¥è‡ªäº HuggingFace Hub çš„æ¨¡å‹ã€‚

## aggregator <a name="aggregator"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| entity_attribute_aggregator | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Return conclusion of the given entity's attribute from some docs. ä»ä¸€äº›æ–‡æ¡£è¿”å›ç»™å®šå®ä½“çš„å±æ€§çš„ç»“è®ºã€‚ | [code](../data_juicer/ops/aggregator/entity_attribute_aggregator.py) | [tests](../tests/ops/aggregator/test_entity_attribute_aggregator.py) |
| meta_tags_aggregator | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Merge similar meta tags to one tag. å°†ç±»ä¼¼çš„å…ƒæ ‡è®°åˆå¹¶åˆ°ä¸€ä¸ªæ ‡è®°ã€‚ | [code](../data_juicer/ops/aggregator/meta_tags_aggregator.py) | [tests](../tests/ops/aggregator/test_meta_tags_aggregator.py) |
| most_relevant_entities_aggregator | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract entities closely related to a given entity from some texts, and sort them in descending order of importance. ä»ä¸€äº›æ–‡æœ¬ä¸­æå–ä¸ç»™å®šå®ä½“å¯†åˆ‡ç›¸å…³çš„å®ä½“ï¼Œå¹¶æŒ‰é‡è¦æ€§çš„é™åºå¯¹å®ƒä»¬è¿›è¡Œæ’åºã€‚ | [code](../data_juicer/ops/aggregator/most_relevant_entities_aggregator.py) | [tests](../tests/ops/aggregator/test_most_relevant_entities_aggregator.py) |
| nested_aggregator | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Considering the limitation of input length, nested aggregate contents for each given number of samples. è€ƒè™‘åˆ°è¾“å…¥é•¿åº¦çš„é™åˆ¶ï¼ŒåµŒå¥—èšåˆæ¯ä¸ªç»™å®šæ•°é‡çš„æ ·æœ¬çš„å†…å®¹ã€‚ | [code](../data_juicer/ops/aggregator/nested_aggregator.py) | [tests](../tests/ops/aggregator/test_nested_aggregator.py) |

## deduplicator <a name="deduplicator"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| document_deduplicator | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Deduplicator to deduplicate samples at document-level using exact matching. Deduplicatorä½¿ç”¨ç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/document_deduplicator.py) | [tests](../tests/ops/deduplicator/test_document_deduplicator.py) |
| document_minhash_deduplicator | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Deduplicator to deduplicate samples at document-level using MinHashLSH. Deduplicatorä½¿ç”¨MinHashLSHåœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/document_minhash_deduplicator.py) | [tests](../tests/ops/deduplicator/test_document_minhash_deduplicator.py) |
| document_simhash_deduplicator | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Deduplicator to deduplicate samples at document-level using SimHash. Deduplicatorä½¿ç”¨SimHashåœ¨æ–‡æ¡£çº§åˆ«å¯¹æ ·æœ¬è¿›è¡Œé‡å¤æ•°æ®åˆ é™¤ã€‚ | [code](../data_juicer/ops/deduplicator/document_simhash_deduplicator.py) | [tests](../tests/ops/deduplicator/test_document_simhash_deduplicator.py) |
| image_deduplicator | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Deduplicator to deduplicate samples at document-level using exact matching of images between documents. Deduplicatorä½¿ç”¨æ–‡æ¡£ä¹‹é—´çš„å›¾åƒç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/image_deduplicator.py) | [tests](../tests/ops/deduplicator/test_image_deduplicator.py) |
| ray_basic_deduplicator | ğŸ’»CPU ğŸ”´Alpha | Backend for deduplicator. deduplicatorçš„åç«¯ã€‚ | [code](../data_juicer/ops/deduplicator/ray_basic_deduplicator.py) | - |
| ray_bts_minhash_deduplicator | ğŸ”¤Text ğŸ’»CPU ğŸŸ¡Beta | A distributed implementation of Union-Find with load balancing. å…·æœ‰è´Ÿè½½å¹³è¡¡çš„Union-Findçš„åˆ†å¸ƒå¼å®ç°ã€‚ | [code](../data_juicer/ops/deduplicator/ray_bts_minhash_deduplicator.py) | [tests](../tests/ops/deduplicator/test_ray_bts_minhash_deduplicator.py) |
| ray_document_deduplicator | ğŸ”¤Text ğŸ’»CPU ğŸŸ¡Beta | Deduplicator to deduplicate samples at document-level using exact matching. Deduplicatorä½¿ç”¨ç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/ray_document_deduplicator.py) | [tests](../tests/ops/deduplicator/test_ray_document_deduplicator.py) |
| ray_image_deduplicator | ğŸImage ğŸ’»CPU ğŸŸ¡Beta | Deduplicator to deduplicate samples at document-level using exact matching of images between documents. Deduplicatorä½¿ç”¨æ–‡æ¡£ä¹‹é—´çš„å›¾åƒç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/ray_image_deduplicator.py) | [tests](../tests/ops/deduplicator/test_ray_image_deduplicator.py) |
| ray_video_deduplicator | ğŸ¬Video ğŸ’»CPU ğŸŸ¡Beta | Deduplicator to deduplicate samples at document-level using exact matching of videos between documents. Deduplicatorä½¿ç”¨æ–‡æ¡£ä¹‹é—´çš„è§†é¢‘ç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/ray_video_deduplicator.py) | [tests](../tests/ops/deduplicator/test_ray_video_deduplicator.py) |
| video_deduplicator | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Deduplicator to deduplicate samples at document-level using exact matching of videos between documents. Deduplicatorä½¿ç”¨æ–‡æ¡£ä¹‹é—´çš„è§†é¢‘ç²¾ç¡®åŒ¹é…åœ¨æ–‡æ¡£çº§åˆ«åˆ é™¤é‡å¤çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/deduplicator/video_deduplicator.py) | [tests](../tests/ops/deduplicator/test_video_deduplicator.py) |

## filter <a name="filter"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| alphanumeric_filter | ğŸ”¤Text ğŸ’»CPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples with alphabet/numeric ratio within a specific range. è¿‡æ»¤å™¨ä¿æŒæ ·å“ä¸å­—æ¯/æ•°å­—çš„æ¯”ä¾‹åœ¨ä¸€ä¸ªç‰¹å®šçš„èŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/alphanumeric_filter.py) | [tests](../tests/ops/filter/test_alphanumeric_filter.py) |
| audio_duration_filter | ğŸ“£Audio ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose audios' durations are within a specified range. ä¿ç•™éŸ³é¢‘æŒç»­æ—¶é—´åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/audio_duration_filter.py) | [tests](../tests/ops/filter/test_audio_duration_filter.py) |
| audio_nmf_snr_filter | ğŸ“£Audio ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose audios' SNRs (computed based on NMF) are within a specified range. ä¿ç•™éŸ³é¢‘çš„snr (æ ¹æ®NMFè®¡ç®—) åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/audio_nmf_snr_filter.py) | [tests](../tests/ops/filter/test_audio_nmf_snr_filter.py) |
| audio_size_filter | ğŸ“£Audio ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose audio size (in bytes/kb/MB/...) within a specific range. ä¿ç•™éŸ³é¢‘å¤§å° (ä»¥å­—èŠ‚/kb/MB/... ä¸ºå•ä½) åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/audio_size_filter.py) | [tests](../tests/ops/filter/test_audio_size_filter.py) |
| average_line_length_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with average line length within a specific range. è¿‡æ»¤å™¨ï¼Œä»¥ä¿æŒå¹³å‡çº¿é•¿åº¦åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/average_line_length_filter.py) | [tests](../tests/ops/filter/test_average_line_length_filter.py) |
| character_repetition_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with char-level n-gram repetition ratio within a specific range. è¿‡æ»¤å™¨å°†å…·æœ‰charçº§n-gramé‡å¤æ¯”ç‡çš„æ ·æœ¬ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/character_repetition_filter.py) | [tests](../tests/ops/filter/test_character_repetition_filter.py) |
| flagged_words_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with flagged-word ratio less than a specific max value. è¿‡æ»¤ä»¥ä¿æŒæ ‡è®°è¯æ¯”ç‡å°äºç‰¹å®šæœ€å¤§å€¼çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/flagged_words_filter.py) | [tests](../tests/ops/filter/test_flagged_words_filter.py) |
| image_aesthetics_filter | ğŸImage ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples with aesthetics scores within a specific range. è¿‡æ»¤ä»¥ä¿æŒç¾å­¦åˆ†æ•°åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·å“ã€‚ | [code](../data_juicer/ops/filter/image_aesthetics_filter.py) | [tests](../tests/ops/filter/test_image_aesthetics_filter.py) |
| image_aspect_ratio_filter | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with image aspect ratio within a specific range. è¿‡æ»¤å™¨ï¼Œä»¥ä¿æŒå›¾åƒçºµæ¨ªæ¯”åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/image_aspect_ratio_filter.py) | [tests](../tests/ops/filter/test_image_aspect_ratio_filter.py) |
| image_face_count_filter | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with the number of faces within a specific range. è¿‡æ»¤ä»¥ä¿æŒæ ·æœ¬çš„é¢æ•°åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/image_face_count_filter.py) | [tests](../tests/ops/filter/test_image_face_count_filter.py) |
| image_face_ratio_filter | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with face area ratios within a specific range. è¿‡æ»¤ä»¥ä¿æŒé¢é¢ç§¯æ¯”åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/image_face_ratio_filter.py) | [tests](../tests/ops/filter/test_image_face_ratio_filter.py) |
| image_nsfw_filter | ğŸImage ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples whose images have low nsfw scores. è¿‡æ»¤å™¨ä¿ç•™å›¾åƒå…·æœ‰ä½nsfwåˆ†æ•°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/image_nsfw_filter.py) | [tests](../tests/ops/filter/test_image_nsfw_filter.py) |
| image_pair_similarity_filter | ğŸImage ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep image pairs with similarities between images within a specific range. è¿‡æ»¤å™¨å°†å›¾åƒä¹‹é—´å…·æœ‰ç›¸ä¼¼æ€§çš„å›¾åƒå¯¹ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/image_pair_similarity_filter.py) | [tests](../tests/ops/filter/test_image_pair_similarity_filter.py) |
| image_shape_filter | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with image shape (w, h) within specific ranges. è¿‡æ»¤å™¨ä¿æŒæ ·å“çš„å›¾åƒå½¢çŠ¶ (wï¼Œh) åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/image_shape_filter.py) | [tests](../tests/ops/filter/test_image_shape_filter.py) |
| image_size_filter | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose image size (in Bytes/KB/MB/...) within a specific range. ä¿ç•™å›¾åƒå¤§å° (ä»¥å­—èŠ‚/KB/MB/... ä¸ºå•ä½) åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/image_size_filter.py) | [tests](../tests/ops/filter/test_image_size_filter.py) |
| image_text_matching_filter | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples those matching score between image and text within a specific range. è¿‡æ»¤å™¨å°†å›¾åƒå’Œæ–‡æœ¬ä¹‹é—´çš„åŒ¹é…åˆ†æ•°ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/image_text_matching_filter.py) | [tests](../tests/ops/filter/test_image_text_matching_filter.py) |
| image_text_similarity_filter | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples those similarities between image and text within a specific range. è¿‡æ»¤å™¨å°†å›¾åƒå’Œæ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/image_text_similarity_filter.py) | [tests](../tests/ops/filter/test_image_text_similarity_filter.py) |
| image_watermark_filter | ğŸImage ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples whose images have no watermark with high probability. è¿‡æ»¤å™¨ï¼Œä»¥ä¿ç•™å›¾åƒæ²¡æœ‰æ°´å°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/image_watermark_filter.py) | [tests](../tests/ops/filter/test_image_watermark_filter.py) |
| language_id_score_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples in a specific language with confidence score larger than a specific min value. è¿‡æ»¤å™¨ä»¥ä¿ç•™ç½®ä¿¡åº¦å¾—åˆ†å¤§äºç‰¹å®šæœ€å°å€¼çš„ç‰¹å®šè¯­è¨€çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/language_id_score_filter.py) | [tests](../tests/ops/filter/test_language_id_score_filter.py) |
| llm_difficulty_score_filter | ğŸš€GPU ğŸŒŠvLLM ğŸ§©HF ğŸ”—API ğŸŸ¡Beta | Filter to keep sample with high difficulty score estimated by LLM. è¿‡æ»¤å™¨ä»¥ä¿æŒLLMä¼°è®¡çš„é«˜éš¾åº¦åˆ†æ•°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/llm_difficulty_score_filter.py) | [tests](../tests/ops/filter/test_llm_difficulty_score_filter.py) |
| llm_quality_score_filter | ğŸš€GPU ğŸŒŠvLLM ğŸ§©HF ğŸ”—API ğŸŸ¡Beta | Filter to keep sample with high quality score estimated by LLM. è¿‡æ»¤å™¨ä»¥ä¿æŒLLMä¼°è®¡çš„é«˜è´¨é‡åˆ†æ•°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/llm_quality_score_filter.py) | [tests](../tests/ops/filter/test_llm_quality_score_filter.py) |
| maximum_line_length_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with maximum line length within a specific range. è¿‡æ»¤å™¨å°†æœ€å¤§è¡Œé•¿åº¦çš„æ ·æœ¬ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/maximum_line_length_filter.py) | [tests](../tests/ops/filter/test_maximum_line_length_filter.py) |
| perplexity_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with perplexity score less than a specific max value. è¿‡æ»¤ä»¥ä¿ç•™å›°æƒ‘åº¦åˆ†æ•°å°äºç‰¹å®šæœ€å¤§å€¼çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/perplexity_filter.py) | [tests](../tests/ops/filter/test_perplexity_filter.py) |
| phrase_grounding_recall_filter | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples whose locating recalls of phrases extracted from text in the images are within a specified range. è¿‡æ»¤å™¨ï¼Œç”¨äºä¿ç•™ä»å›¾åƒä¸­çš„æ–‡æœ¬ä¸­æå–çš„çŸ­è¯­çš„å®šä½å›å¿†åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/phrase_grounding_recall_filter.py) | [tests](../tests/ops/filter/test_phrase_grounding_recall_filter.py) |
| special_characters_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with special-char ratio within a specific range. è¿‡æ»¤å™¨ï¼Œä»¥ä¿æŒæ ·å“çš„ç‰¹æ®Šå­—ç¬¦æ¯”åœ¨ä¸€ä¸ªç‰¹å®šçš„èŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/special_characters_filter.py) | [tests](../tests/ops/filter/test_special_characters_filter.py) |
| specified_field_filter | ğŸ’»CPU ğŸŸ¢Stable | Filter based on specified field information. æ ¹æ®æŒ‡å®šçš„å­—æ®µä¿¡æ¯è¿›è¡Œç­›é€‰ã€‚ | [code](../data_juicer/ops/filter/specified_field_filter.py) | [tests](../tests/ops/filter/test_specified_field_filter.py) |
| specified_numeric_field_filter | ğŸ’»CPU ğŸŸ¢Stable | Filter based on specified numeric field information. æ ¹æ®æŒ‡å®šçš„æ•°å€¼å­—æ®µä¿¡æ¯è¿›è¡Œç­›é€‰ã€‚ | [code](../data_juicer/ops/filter/specified_numeric_field_filter.py) | [tests](../tests/ops/filter/test_specified_numeric_field_filter.py) |
| stopwords_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with stopword ratio larger than a specific min value. è¿‡æ»¤ä»¥ä¿æŒåœæ­¢è¯æ¯”ç‡å¤§äºç‰¹å®šæœ€å°å€¼çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/stopwords_filter.py) | [tests](../tests/ops/filter/test_stopwords_filter.py) |
| suffix_filter | ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with specified suffix. è¿‡æ»¤å™¨ä»¥ä¿ç•™å…·æœ‰æŒ‡å®šåç¼€çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/suffix_filter.py) | [tests](../tests/ops/filter/test_suffix_filter.py) |
| text_action_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep texts those contain actions in the text. è¿‡æ»¤ä»¥ä¿ç•™æ–‡æœ¬ä¸­åŒ…å«æ“ä½œçš„æ–‡æœ¬ã€‚ | [code](../data_juicer/ops/filter/text_action_filter.py) | [tests](../tests/ops/filter/test_text_action_filter.py) |
| text_entity_dependency_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Identify the entities in the text which are independent with other token, and filter them. è¯†åˆ«æ–‡æœ¬ä¸­ä¸å…¶ä»–ä»¤ç‰Œç‹¬ç«‹çš„å®ä½“ï¼Œå¹¶å¯¹å…¶è¿›è¡Œè¿‡æ»¤ã€‚ | [code](../data_juicer/ops/filter/text_entity_dependency_filter.py) | [tests](../tests/ops/filter/test_text_entity_dependency_filter.py) |
| text_length_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with total text length within a specific range. è¿‡æ»¤ä»¥ä¿æŒæ–‡æœ¬æ€»é•¿åº¦åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/text_length_filter.py) | [tests](../tests/ops/filter/test_text_length_filter.py) |
| text_pair_similarity_filter | ğŸ”¤Text ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep text pairs with similarities between texts within a specific range. è¿‡æ»¤å™¨å°†æ–‡æœ¬ä¹‹é—´å…·æœ‰ç›¸ä¼¼æ€§çš„æ–‡æœ¬å¯¹ä¿ç•™åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/text_pair_similarity_filter.py) | [tests](../tests/ops/filter/test_text_pair_similarity_filter.py) |
| token_num_filter | ğŸ”¤Text ğŸ’»CPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples with total token number within a specific range. ç­›é€‰å™¨å°†æ€»ä»¤ç‰Œæ•°çš„æ ·æœ¬ä¿ç•™åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/token_num_filter.py) | [tests](../tests/ops/filter/test_token_num_filter.py) |
| video_aesthetics_filter | ğŸ¬Video ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep data samples with aesthetics scores for specified frames in the videos within a specific range. è¿‡æ»¤å™¨å°†è§†é¢‘ä¸­æŒ‡å®šå¸§çš„ç¾å­¦å¾—åˆ†æ•°æ®æ ·æœ¬ä¿ç•™åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/video_aesthetics_filter.py) | [tests](../tests/ops/filter/test_video_aesthetics_filter.py) |
| video_aspect_ratio_filter | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with video aspect ratio within a specific range. è¿‡æ»¤å™¨å°†è§†é¢‘çºµæ¨ªæ¯”çš„æ ·æœ¬ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/video_aspect_ratio_filter.py) | [tests](../tests/ops/filter/test_video_aspect_ratio_filter.py) |
| video_duration_filter | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose videos' durations are within a specified range. ä¿ç•™è§†é¢‘æŒç»­æ—¶é—´åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_duration_filter.py) | [tests](../tests/ops/filter/test_video_duration_filter.py) |
| video_frames_text_similarity_filter | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples those similarities between sampled video frame images and text within a specific range. è¿‡æ»¤ä»¥ä¿æŒé‡‡æ ·è§†é¢‘å¸§å›¾åƒå’Œæ–‡æœ¬ä¹‹é—´çš„ç›¸ä¼¼æ€§åœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/video_frames_text_similarity_filter.py) | [tests](../tests/ops/filter/test_video_frames_text_similarity_filter.py) |
| video_motion_score_filter | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with video motion scores within a specific range. è¿‡æ»¤å™¨å°†è§†é¢‘è¿åŠ¨åˆ†æ•°çš„æ ·æœ¬ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/video_motion_score_filter.py) | [tests](../tests/ops/filter/test_video_motion_score_filter.py) |
| video_motion_score_raft_filter | ğŸ¬Video ğŸš€GPU ğŸŸ¢Stable | Filter to keep samples with video motion scores within a specified range. è¿‡æ»¤å™¨å°†è§†é¢‘è¿åŠ¨åˆ†æ•°çš„æ ·æœ¬ä¿æŒåœ¨æŒ‡å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/video_motion_score_raft_filter.py) | [tests](../tests/ops/filter/test_video_motion_score_raft_filter.py) |
| video_nsfw_filter | ğŸ¬Video ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples whose videos have low nsfw scores. è¿‡æ»¤å™¨ä»¥ä¿ç•™å…¶è§†é¢‘å…·æœ‰ä½nsfwåˆ†æ•°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_nsfw_filter.py) | [tests](../tests/ops/filter/test_video_nsfw_filter.py) |
| video_ocr_area_ratio_filter | ğŸ¬Video ğŸš€GPU ğŸŸ¢Stable | Keep data samples whose detected text area ratios for specified frames in the video are within a specified range. ä¿ç•™æ£€æµ‹åˆ°çš„è§†é¢‘ä¸­æŒ‡å®šå¸§çš„æ–‡æœ¬é¢ç§¯æ¯”ç‡åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_ocr_area_ratio_filter.py) | [tests](../tests/ops/filter/test_video_ocr_area_ratio_filter.py) |
| video_resolution_filter | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Keep data samples whose videos' resolutions are within a specified range. ä¿ç•™è§†é¢‘åˆ†è¾¨ç‡åœ¨æŒ‡å®šèŒƒå›´å†…çš„æ•°æ®æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_resolution_filter.py) | [tests](../tests/ops/filter/test_video_resolution_filter.py) |
| video_tagging_from_frames_filter | ğŸ¬Video ğŸš€GPU ğŸŸ¢Stable | Filter to keep samples whose videos contain the given tags. è¿‡æ»¤å™¨ä»¥ä¿ç•™å…¶è§†é¢‘åŒ…å«ç»™å®šæ ‡ç­¾çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_tagging_from_frames_filter.py) | [tests](../tests/ops/filter/test_video_tagging_from_frames_filter.py) |
| video_watermark_filter | ğŸ¬Video ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Filter to keep samples whose videos have no watermark with high probability. è¿‡æ»¤å™¨ä»¥ä¿æŒå…¶è§†é¢‘å…·æœ‰é«˜æ¦‚ç‡æ²¡æœ‰æ°´å°çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/video_watermark_filter.py) | [tests](../tests/ops/filter/test_video_watermark_filter.py) |
| word_repetition_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with word-level n-gram repetition ratio within a specific range. è¿‡æ»¤å™¨å°†å•è¯çº§n-gramé‡å¤æ¯”ç‡çš„æ ·æœ¬ä¿æŒåœ¨ç‰¹å®šèŒƒå›´å†…ã€‚ | [code](../data_juicer/ops/filter/word_repetition_filter.py) | [tests](../tests/ops/filter/test_word_repetition_filter.py) |
| words_num_filter | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Filter to keep samples with total words number within a specific range. è¿‡æ»¤å™¨ï¼Œä»¥ä¿æŒæ€»å­—æ•°åœ¨ç‰¹å®šèŒƒå›´å†…çš„æ ·æœ¬ã€‚ | [code](../data_juicer/ops/filter/words_num_filter.py) | [tests](../tests/ops/filter/test_words_num_filter.py) |

## formatter <a name="formatter"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| csv_formatter | ğŸŸ¢Stable | The class is used to load and format csv-type files. ç±»ç”¨äºåŠ è½½å’Œæ ¼å¼åŒ–csvç±»å‹çš„æ–‡ä»¶ã€‚ | [code](../data_juicer/format/csv_formatter.py) | [tests](../tests/format/test_csv_formatter.py) |
| empty_formatter | ğŸŸ¢Stable | The class is used to create empty data. ç±»ç”¨äºåˆ›å»ºç©ºæ•°æ®ã€‚ | [code](../data_juicer/format/empty_formatter.py) | [tests](../tests/format/test_empty_formatter.py) |
| json_formatter | ğŸŸ¡Beta | The class is used to load and format json-type files. ç±»ç”¨äºåŠ è½½å’Œæ ¼å¼åŒ–jsonç±»å‹çš„æ–‡ä»¶ã€‚ | [code](../data_juicer/format/json_formatter.py) | [tests](../tests/format/test_json_formatter.py) |
| local_formatter | ğŸŸ¢Stable | The class is used to load a dataset from local files or local directory. ç±»ç”¨äºä»æœ¬åœ°æ–‡ä»¶æˆ–æœ¬åœ°ç›®å½•åŠ è½½æ•°æ®é›†ã€‚ | [code](../data_juicer/format/formatter.py) | [tests](../tests/format/test_unify_format.py) |
| parquet_formatter | ğŸŸ¢Stable | The class is used to load and format parquet-type files. è¯¥ç±»ç”¨äºåŠ è½½å’Œæ ¼å¼åŒ–é•¶æœ¨åœ°æ¿ç±»å‹çš„æ–‡ä»¶ã€‚ | [code](../data_juicer/format/parquet_formatter.py) | [tests](../tests/format/test_parquet_formatter.py) |
| remote_formatter | ğŸŸ¢Stable | The class is used to load a dataset from repository of huggingface hub. è¯¥ç±»ç”¨äºä»huggingface hubçš„å­˜å‚¨åº“åŠ è½½æ•°æ®é›†ã€‚ | [code](../data_juicer/format/formatter.py) | [tests](../tests/format/test_unify_format.py) |
| text_formatter | ğŸ”´Alpha | The class is used to load and format text-type files. ç±»ç”¨äºåŠ è½½å’Œæ ¼å¼åŒ–æ–‡æœ¬ç±»å‹æ–‡ä»¶ã€‚ | [code](../data_juicer/format/text_formatter.py) | - |
| tsv_formatter | ğŸŸ¢Stable | The class is used to load and format tsv-type files. è¯¥ç±»ç”¨äºåŠ è½½å’Œæ ¼å¼åŒ–tsvç±»å‹çš„æ–‡ä»¶ã€‚ | [code](../data_juicer/format/tsv_formatter.py) | [tests](../tests/format/test_tsv_formatter.py) |

## grouper <a name="grouper"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| key_value_grouper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Group samples to batched samples according values in given keys. æ ¹æ®ç»™å®šé”®ä¸­çš„å€¼å°†æ ·æœ¬åˆ†ç»„ä¸ºæ‰¹å¤„ç†æ ·æœ¬ã€‚ | [code](../data_juicer/ops/grouper/key_value_grouper.py) | [tests](../tests/ops/grouper/test_key_value_grouper.py) |
| naive_grouper | ğŸ’»CPU ğŸŸ¢Stable | Group all samples to one batched sample. å°†æ‰€æœ‰æ ·å“åˆ†ç»„ä¸ºä¸€æ‰¹æ ·å“ã€‚ | [code](../data_juicer/ops/grouper/naive_grouper.py) | [tests](../tests/ops/grouper/test_naive_grouper.py) |
| naive_reverse_grouper | ğŸ’»CPU ğŸŸ¢Stable | Split batched samples to samples. å°†æ‰¹å¤„ç†çš„æ ·å“æ‹†åˆ†ä¸ºæ ·å“ã€‚ | [code](../data_juicer/ops/grouper/naive_reverse_grouper.py) | [tests](../tests/ops/grouper/test_naive_reverse_grouper.py) |

## mapper <a name="mapper"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| audio_add_gaussian_noise_mapper | ğŸ“£Audio ğŸ’»CPU ğŸŸ¡Beta | Mapper to add gaussian noise to audio. æ˜ å°„å™¨å‘éŸ³é¢‘æ·»åŠ é«˜æ–¯å™ªå£°ã€‚ | [code](../data_juicer/ops/mapper/audio_add_gaussian_noise_mapper.py) | [tests](../tests/ops/mapper/test_audio_add_gaussian_noise_mapper.py) |
| audio_ffmpeg_wrapped_mapper | ğŸ“£Audio ğŸ’»CPU ğŸŸ¢Stable | Simple wrapper for FFmpeg audio filters. FFmpegéŸ³é¢‘æ»¤æ³¢å™¨çš„ç®€å•åŒ…è£…ã€‚ | [code](../data_juicer/ops/mapper/audio_ffmpeg_wrapped_mapper.py) | [tests](../tests/ops/mapper/test_audio_ffmpeg_wrapped_mapper.py) |
| calibrate_qa_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to calibrate question-answer pairs based on reference text. æ˜ å°„å™¨åŸºäºå‚è€ƒæ–‡æœ¬æ ¡å‡†é—®ç­”å¯¹ã€‚ | [code](../data_juicer/ops/mapper/calibrate_qa_mapper.py) | [tests](../tests/ops/mapper/test_calibrate_qa_mapper.py) |
| calibrate_query_mapper | ğŸ’»CPU ğŸŸ¢Stable | Mapper to calibrate query in question-answer pairs based on reference text. æ˜ å°„å™¨åŸºäºå‚è€ƒæ–‡æœ¬æ ¡å‡†é—®ç­”å¯¹ä¸­çš„æŸ¥è¯¢ã€‚ | [code](../data_juicer/ops/mapper/calibrate_query_mapper.py) | [tests](../tests/ops/mapper/test_calibrate_query_mapper.py) |
| calibrate_response_mapper | ğŸ’»CPU ğŸŸ¢Stable | Mapper to calibrate response in question-answer pairs based on reference text. æ˜ å°„å™¨åŸºäºå‚è€ƒæ–‡æœ¬æ ¡å‡†é—®ç­”å¯¹ä¸­çš„å“åº”ã€‚ | [code](../data_juicer/ops/mapper/calibrate_response_mapper.py) | [tests](../tests/ops/mapper/test_calibrate_response_mapper.py) |
| chinese_convert_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to convert Chinese between Traditional Chinese, Simplified Chinese and Japanese Kanji. æ˜ å°„å™¨åœ¨ç¹ä½“ä¸­æ–‡ï¼Œç®€ä½“ä¸­æ–‡å’Œæ—¥è¯­æ±‰å­—ä¹‹é—´è½¬æ¢ä¸­æ–‡ã€‚ | [code](../data_juicer/ops/mapper/chinese_convert_mapper.py) | [tests](../tests/ops/mapper/test_chinese_convert_mapper.py) |
| clean_copyright_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean copyright comments at the beginning of the text samples. Mapperæ¸…ç†ç‰ˆæƒæ³¨é‡Šå¼€å¤´çš„æ–‡æœ¬æ ·æœ¬ã€‚ | [code](../data_juicer/ops/mapper/clean_copyright_mapper.py) | [tests](../tests/ops/mapper/test_clean_copyright_mapper.py) |
| clean_email_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean email in text samples. æ˜ å°„å™¨æ¸…ç†æ–‡æœ¬æ ·æœ¬ä¸­çš„ç”µå­é‚®ä»¶ã€‚ | [code](../data_juicer/ops/mapper/clean_email_mapper.py) | [tests](../tests/ops/mapper/test_clean_email_mapper.py) |
| clean_html_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean html code in text samples. æ˜ å°„å™¨æ¥æ¸…ç†æ–‡æœ¬ç¤ºä¾‹ä¸­çš„htmlä»£ç ã€‚ | [code](../data_juicer/ops/mapper/clean_html_mapper.py) | [tests](../tests/ops/mapper/test_clean_html_mapper.py) |
| clean_ip_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean ipv4 and ipv6 address in text samples. æ˜ å°„å™¨ä»¥æ¸…é™¤æ–‡æœ¬ç¤ºä¾‹ä¸­çš„ipv4å’Œipv6åœ°å€ã€‚ | [code](../data_juicer/ops/mapper/clean_ip_mapper.py) | [tests](../tests/ops/mapper/test_clean_ip_mapper.py) |
| clean_links_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean links like http/https/ftp in text samples. æ˜ å°„å™¨æ¥æ¸…ç†é“¾æ¥ï¼Œå¦‚æ–‡æœ¬ç¤ºä¾‹ä¸­çš„http/https/ftpã€‚ | [code](../data_juicer/ops/mapper/clean_links_mapper.py) | [tests](../tests/ops/mapper/test_clean_links_mapper.py) |
| dialog_intent_detection_mapper | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to generate user's intent labels in dialog. æ˜ å°„å™¨åœ¨å¯¹è¯æ¡†ä¸­ç”Ÿæˆç”¨æˆ·çš„æ„å›¾æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/dialog_intent_detection_mapper.py) | [tests](../tests/ops/mapper/test_dialog_intent_detection_mapper.py) |
| dialog_sentiment_detection_mapper | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to generate user's sentiment labels in dialog. æ˜ å°„å™¨åœ¨å¯¹è¯æ¡†ä¸­ç”Ÿæˆç”¨æˆ·çš„æƒ…ç»ªæ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/dialog_sentiment_detection_mapper.py) | [tests](../tests/ops/mapper/test_dialog_sentiment_detection_mapper.py) |
| dialog_sentiment_intensity_mapper | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to predict user's sentiment intensity (from -5 to 5 in default prompt) in dialog. Mapperåœ¨å¯¹è¯æ¡†ä¸­é¢„æµ‹ç”¨æˆ·çš„æƒ…ç»ªå¼ºåº¦ (åœ¨é»˜è®¤æç¤ºä¸­ä»-5åˆ°5)ã€‚ | [code](../data_juicer/ops/mapper/dialog_sentiment_intensity_mapper.py) | [tests](../tests/ops/mapper/test_dialog_sentiment_intensity_mapper.py) |
| dialog_topic_detection_mapper | ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to generate user's topic labels in dialog. æ˜ å°„å™¨åœ¨å¯¹è¯æ¡†ä¸­ç”Ÿæˆç”¨æˆ·çš„ä¸»é¢˜æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/dialog_topic_detection_mapper.py) | [tests](../tests/ops/mapper/test_dialog_topic_detection_mapper.py) |
| expand_macro_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to expand macro definitions in the document body of Latex samples. Mapperæ¥æ‰©å±•Latexç¤ºä¾‹æ–‡æ¡£ä¸»ä½“ä¸­çš„å®å®šä¹‰ã€‚ | [code](../data_juicer/ops/mapper/expand_macro_mapper.py) | [tests](../tests/ops/mapper/test_expand_macro_mapper.py) |
| extract_entity_attribute_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract attributes for given entities from the text. ä»æ–‡æœ¬ä¸­æå–ç»™å®šå®ä½“çš„å±æ€§ã€‚ | [code](../data_juicer/ops/mapper/extract_entity_attribute_mapper.py) | [tests](../tests/ops/mapper/test_extract_entity_attribute_mapper.py) |
| extract_entity_relation_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract entities and relations in the text for knowledge graph. æå–çŸ¥è¯†å›¾è°±çš„æ–‡æœ¬ä¸­çš„å®ä½“å’Œå…³ç³»ã€‚ | [code](../data_juicer/ops/mapper/extract_entity_relation_mapper.py) | [tests](../tests/ops/mapper/test_extract_entity_relation_mapper.py) |
| extract_event_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract events and relevant characters in the text. æå–æ–‡æœ¬ä¸­çš„äº‹ä»¶å’Œç›¸å…³å­—ç¬¦ã€‚ | [code](../data_juicer/ops/mapper/extract_event_mapper.py) | [tests](../tests/ops/mapper/test_extract_event_mapper.py) |
| extract_keyword_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Generate keywords for the text. ä¸ºæ–‡æœ¬ç”Ÿæˆå…³é”®å­—ã€‚ | [code](../data_juicer/ops/mapper/extract_keyword_mapper.py) | [tests](../tests/ops/mapper/test_extract_keyword_mapper.py) |
| extract_nickname_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract nickname relationship in the text. æå–æ–‡æœ¬ä¸­çš„æ˜µç§°å…³ç³»ã€‚ | [code](../data_juicer/ops/mapper/extract_nickname_mapper.py) | [tests](../tests/ops/mapper/test_extract_nickname_mapper.py) |
| extract_support_text_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Extract support sub text for a summary. æå–æ‘˜è¦çš„æ”¯æŒå­æ–‡æœ¬ã€‚ | [code](../data_juicer/ops/mapper/extract_support_text_mapper.py) | [tests](../tests/ops/mapper/test_extract_support_text_mapper.py) |
| extract_tables_from_html_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¡Beta | Mapper to extract tables from HTML content. æ˜ å°„å™¨ä»HTMLå†…å®¹ä¸­æå–è¡¨ã€‚ | [code](../data_juicer/ops/mapper/extract_tables_from_html_mapper.py) | [tests](../tests/ops/mapper/test_extract_tables_from_html_mapper.py) |
| fix_unicode_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to fix unicode errors in text samples. æ˜ å°„å™¨ä¿®å¤æ–‡æœ¬ç¤ºä¾‹ä¸­çš„unicodeé”™è¯¯ã€‚ | [code](../data_juicer/ops/mapper/fix_unicode_mapper.py) | [tests](../tests/ops/mapper/test_fix_unicode_mapper.py) |
| generate_qa_from_examples_mapper | ğŸš€GPU ğŸŒŠvLLM ğŸ§©HF ğŸŸ¢Stable | Mapper to generate question and answer pairs from examples. æ˜ å°„å™¨ä»ç¤ºä¾‹ç”Ÿæˆé—®é¢˜å’Œç­”æ¡ˆå¯¹ã€‚ | [code](../data_juicer/ops/mapper/generate_qa_from_examples_mapper.py) | [tests](../tests/ops/mapper/test_generate_qa_from_examples_mapper.py) |
| generate_qa_from_text_mapper | ğŸ”¤Text ğŸš€GPU ğŸŒŠvLLM ğŸ§©HF ğŸŸ¢Stable | Mapper to generate question and answer pairs from text. æ˜ å°„å™¨ä»æ–‡æœ¬ç”Ÿæˆé—®é¢˜å’Œç­”æ¡ˆå¯¹ã€‚ | [code](../data_juicer/ops/mapper/generate_qa_from_text_mapper.py) | [tests](../tests/ops/mapper/test_generate_qa_from_text_mapper.py) |
| image_blur_mapper | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Mapper to blur images. æ˜ å°„å™¨æ¥æ¨¡ç³Šå›¾åƒã€‚ | [code](../data_juicer/ops/mapper/image_blur_mapper.py) | [tests](../tests/ops/mapper/test_image_blur_mapper.py) |
| image_captioning_from_gpt4v_mapper | ğŸ”®Multimodal ğŸ’»CPU ğŸ”´Alpha | Mapper to generate samples whose texts are generated based on gpt-4-vision and the image. Mapperç”Ÿæˆæ ·æœ¬ï¼Œå…¶æ–‡æœ¬åŸºäºgpt-4-visionå’Œå›¾åƒç”Ÿæˆã€‚ | [code](../data_juicer/ops/mapper/image_captioning_from_gpt4v_mapper.py) | - |
| image_captioning_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to generate samples whose captions are generated based on another model and the figure. æ˜ å°„å™¨ç”Ÿæˆæ ·æœ¬ï¼Œå…¶æ ‡é¢˜æ˜¯åŸºäºå¦ä¸€ä¸ªæ¨¡å‹å’Œå›¾ç”Ÿæˆçš„ã€‚ | [code](../data_juicer/ops/mapper/image_captioning_mapper.py) | [tests](../tests/ops/mapper/test_image_captioning_mapper.py) |
| image_diffusion_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Generate image by diffusion model. é€šè¿‡æ‰©æ•£æ¨¡å‹ç”Ÿæˆå›¾åƒã€‚ | [code](../data_juicer/ops/mapper/image_diffusion_mapper.py) | [tests](../tests/ops/mapper/test_image_diffusion_mapper.py) |
| image_face_blur_mapper | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Mapper to blur faces detected in images. æ˜ å°„å™¨æ¨¡ç³Šå›¾åƒä¸­æ£€æµ‹åˆ°çš„äººè„¸ã€‚ | [code](../data_juicer/ops/mapper/image_face_blur_mapper.py) | [tests](../tests/ops/mapper/test_image_face_blur_mapper.py) |
| image_remove_background_mapper | ğŸImage ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove background of images. æ˜ å°„å™¨åˆ é™¤å›¾åƒçš„èƒŒæ™¯ã€‚ | [code](../data_juicer/ops/mapper/image_remove_background_mapper.py) | [tests](../tests/ops/mapper/test_image_remove_background_mapper.py) |
| image_segment_mapper | ğŸImage ğŸš€GPU ğŸŸ¢Stable | Perform segment-anything on images and return the bounding boxes. åœ¨å›¾åƒä¸Šæ‰§è¡Œsegment-anythingå¹¶è¿”å›è¾¹ç•Œæ¡†ã€‚ | [code](../data_juicer/ops/mapper/image_segment_mapper.py) | [tests](../tests/ops/mapper/test_image_segment_mapper.py) |
| image_tagging_mapper | ğŸImage ğŸš€GPU ğŸŸ¢Stable | Mapper to generate image tags. æ˜ å°„å™¨ç”Ÿæˆå›¾åƒæ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/image_tagging_mapper.py) | [tests](../tests/ops/mapper/test_image_tagging_mapper.py) |
| imgdiff_difference_area_generator_mapper | ğŸš€GPU ğŸŸ¡Beta | A fused operator for OPs that is used to run sequential OPs on the same batch to allow fine-grained control on data processing. OPsçš„èåˆæ“ä½œç¬¦ï¼Œç”¨äºåœ¨åŒä¸€æ‰¹æ¬¡ä¸Šè¿è¡Œé¡ºåºOPsï¼Œä»¥å®ç°å¯¹æ•°æ®å¤„ç†çš„ç»†ç²’åº¦æ§åˆ¶ã€‚ | [code](../data_juicer/ops/mapper/imgdiff_difference_area_generator_mapper.py) | [tests](../tests/ops/mapper/test_imgdiff_difference_area_generator_mapper.py) |
| imgdiff_difference_caption_generator_mapper | ğŸš€GPU ğŸŸ¡Beta | A fused operator for OPs that is used to run sequential OPs on the same batch to allow fine-grained control on data processing. OPsçš„èåˆæ“ä½œç¬¦ï¼Œç”¨äºåœ¨åŒä¸€æ‰¹æ¬¡ä¸Šè¿è¡Œé¡ºåºOPsï¼Œä»¥å®ç°å¯¹æ•°æ®å¤„ç†çš„ç»†ç²’åº¦æ§åˆ¶ã€‚ | [code](../data_juicer/ops/mapper/imgdiff_difference_caption_generator_mapper.py) | [tests](../tests/ops/mapper/test_imgdiff_difference_caption_generator_mapper.py) |
| mllm_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to use MLLMs for visual question answering tasks. Mapperä½¿ç”¨MLLMsè¿›è¡Œè§†è§‰é—®ç­”ä»»åŠ¡ã€‚ | [code](../data_juicer/ops/mapper/mllm_mapper.py) | [tests](../tests/ops/mapper/test_mllm_mapper.py) |
| nlpaug_en_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to simply augment samples in English based on nlpaug library. æ˜ å°„å™¨åŸºäºnlpaugåº“ç®€å•åœ°å¢åŠ è‹±è¯­æ ·æœ¬ã€‚ | [code](../data_juicer/ops/mapper/nlpaug_en_mapper.py) | [tests](../tests/ops/mapper/test_nlpaug_en_mapper.py) |
| nlpcda_zh_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to simply augment samples in Chinese based on nlpcda library. åŸºäºnlpcdaåº“çš„æ˜ å°„å™¨å¯ä»¥ç®€å•åœ°å¢åŠ ä¸­æ–‡æ ·æœ¬ã€‚ | [code](../data_juicer/ops/mapper/nlpcda_zh_mapper.py) | [tests](../tests/ops/mapper/test_nlpcda_zh_mapper.py) |
| optimize_qa_mapper | ğŸš€GPU ğŸŒŠvLLM ğŸ§©HF ğŸŸ¢Stable | Mapper to optimize question-answer pairs. æ˜ å°„å™¨æ¥ä¼˜åŒ–é—®é¢˜-ç­”æ¡ˆå¯¹ã€‚ | [code](../data_juicer/ops/mapper/optimize_qa_mapper.py) | [tests](../tests/ops/mapper/test_optimize_qa_mapper.py) |
| optimize_query_mapper | ğŸš€GPU ğŸŸ¢Stable | Mapper to optimize query in question-answer pairs. æ˜ å°„å™¨æ¥ä¼˜åŒ–é—®ç­”å¯¹ä¸­çš„æŸ¥è¯¢ã€‚ | [code](../data_juicer/ops/mapper/optimize_query_mapper.py) | [tests](../tests/ops/mapper/test_optimize_query_mapper.py) |
| optimize_response_mapper | ğŸš€GPU ğŸŸ¢Stable | Mapper to optimize response in question-answer pairs. æ˜ å°„å™¨æ¥ä¼˜åŒ–é—®ç­”å¯¹ä¸­çš„å“åº”ã€‚ | [code](../data_juicer/ops/mapper/optimize_response_mapper.py) | [tests](../tests/ops/mapper/test_optimize_response_mapper.py) |
| pair_preference_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Mapper to construct paired preference samples. æ˜ å°„å™¨æ¥æ„é€ æˆå¯¹çš„åå¥½æ ·æœ¬ã€‚ | [code](../data_juicer/ops/mapper/pair_preference_mapper.py) | [tests](../tests/ops/mapper/test_pair_preference_mapper.py) |
| punctuation_normalization_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to normalize unicode punctuations to English punctuations in text samples. æ˜ å°„å™¨å°†æ–‡æœ¬ç¤ºä¾‹ä¸­çš„unicodeæ ‡ç‚¹è§„èŒƒåŒ–ä¸ºè‹±æ–‡æ ‡ç‚¹ã€‚ | [code](../data_juicer/ops/mapper/punctuation_normalization_mapper.py) | [tests](../tests/ops/mapper/test_punctuation_normalization_mapper.py) |
| python_file_mapper | ğŸ’»CPU ğŸŸ¢Stable | Mapper for executing Python function defined in a file. Mapperç”¨äºæ‰§è¡Œæ–‡ä»¶ä¸­å®šä¹‰çš„Pythonå‡½æ•°ã€‚ | [code](../data_juicer/ops/mapper/python_file_mapper.py) | [tests](../tests/ops/mapper/test_python_file_mapper.py) |
| python_lambda_mapper | ğŸ’»CPU ğŸŸ¢Stable | Mapper for executing Python lambda function on data samples. ç”¨äºå¯¹æ•°æ®ç¤ºä¾‹æ‰§è¡ŒPython lambdaå‡½æ•°çš„æ˜ å°„å™¨ã€‚ | [code](../data_juicer/ops/mapper/python_lambda_mapper.py) | [tests](../tests/ops/mapper/test_python_lambda_mapper.py) |
| query_intent_detection_mapper | ğŸš€GPU ğŸ§©HF ğŸ§©HF ğŸŸ¢Stable | Mapper to predict user's Intent label in query. Mapperåœ¨æŸ¥è¯¢ä¸­é¢„æµ‹ç”¨æˆ·çš„æ„å›¾æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/query_intent_detection_mapper.py) | [tests](../tests/ops/mapper/test_query_intent_detection_mapper.py) |
| query_sentiment_detection_mapper | ğŸš€GPU ğŸ§©HF ğŸ§©HF ğŸŸ¢Stable | Mapper to predict user's sentiment label ('negative', 'neutral' and 'positive') in query. Mapperåœ¨æŸ¥è¯¢ä¸­é¢„æµ‹ç”¨æˆ·çš„æƒ…ç»ªæ ‡ç­¾ (â€œè´Ÿé¢â€ï¼Œâ€œä¸­æ€§â€ å’Œ â€œæ­£é¢â€)ã€‚ | [code](../data_juicer/ops/mapper/query_sentiment_detection_mapper.py) | [tests](../tests/ops/mapper/test_query_sentiment_detection_mapper.py) |
| query_topic_detection_mapper | ğŸš€GPU ğŸ§©HF ğŸ§©HF ğŸŸ¢Stable | Mapper to predict user's topic label in query. Mapperåœ¨æŸ¥è¯¢ä¸­é¢„æµ‹ç”¨æˆ·çš„ä¸»é¢˜æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/query_topic_detection_mapper.py) | [tests](../tests/ops/mapper/test_query_topic_detection_mapper.py) |
| relation_identity_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | identify relation between two entity in the text. ç¡®å®šæ–‡æœ¬ä¸­ä¸¤ä¸ªå®ä½“ä¹‹é—´çš„å…³ç³»ã€‚ | [code](../data_juicer/ops/mapper/relation_identity_mapper.py) | [tests](../tests/ops/mapper/test_relation_identity_mapper.py) |
| remove_bibliography_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove bibliography at the end of documents in Latex samples. æ˜ å°„å™¨åˆ é™¤Latexæ ·æœ¬ä¸­æ–‡æ¡£æœ«å°¾çš„å‚è€ƒä¹¦ç›®ã€‚ | [code](../data_juicer/ops/mapper/remove_bibliography_mapper.py) | [tests](../tests/ops/mapper/test_remove_bibliography_mapper.py) |
| remove_comments_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove comments in different kinds of documents. æ˜ å°„å™¨åˆ é™¤ä¸åŒç±»å‹çš„æ–‡æ¡£ä¸­çš„æ³¨é‡Šã€‚ | [code](../data_juicer/ops/mapper/remove_comments_mapper.py) | [tests](../tests/ops/mapper/test_remove_comments_mapper.py) |
| remove_header_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove headers at the beginning of documents in Latex samples. æ˜ å°„å™¨åˆ é™¤Latexç¤ºä¾‹ä¸­æ–‡æ¡£å¼€å¤´çš„æ ‡é¢˜ã€‚ | [code](../data_juicer/ops/mapper/remove_header_mapper.py) | [tests](../tests/ops/mapper/test_remove_header_mapper.py) |
| remove_long_words_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove long words within a specific range. æ˜ å°„å™¨åˆ é™¤ç‰¹å®šèŒƒå›´å†…çš„é•¿è¯ã€‚ | [code](../data_juicer/ops/mapper/remove_long_words_mapper.py) | [tests](../tests/ops/mapper/test_remove_long_words_mapper.py) |
| remove_non_chinese_character_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove non chinese Character in text samples. æ˜ å°„å™¨åˆ é™¤æ–‡æœ¬æ ·æœ¬ä¸­çš„éä¸­æ–‡å­—ç¬¦ã€‚ | [code](../data_juicer/ops/mapper/remove_non_chinese_character_mapper.py) | [tests](../tests/ops/mapper/test_remove_non_chinese_character_mapper.py) |
| remove_repeat_sentences_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove repeat sentences in text samples. æ˜ å°„å™¨åˆ é™¤æ–‡æœ¬æ ·æœ¬ä¸­çš„é‡å¤å¥å­ã€‚ | [code](../data_juicer/ops/mapper/remove_repeat_sentences_mapper.py) | [tests](../tests/ops/mapper/test_remove_repeat_sentences_mapper.py) |
| remove_specific_chars_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to clean specific chars in text samples. æ˜ å°„å™¨æ¥æ¸…ç†æ–‡æœ¬ç¤ºä¾‹ä¸­çš„ç‰¹å®šå­—ç¬¦ã€‚ | [code](../data_juicer/ops/mapper/remove_specific_chars_mapper.py) | [tests](../tests/ops/mapper/test_remove_specific_chars_mapper.py) |
| remove_table_text_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove table texts from text samples. æ˜ å°„å™¨ä»æ–‡æœ¬æ ·æœ¬ä¸­åˆ é™¤è¡¨æ–‡æœ¬ã€‚ | [code](../data_juicer/ops/mapper/remove_table_text_mapper.py) | [tests](../tests/ops/mapper/test_remove_table_text_mapper.py) |
| remove_words_with_incorrect_substrings_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to remove words with incorrect substrings. æ˜ å°„å™¨åˆ é™¤ä¸æ­£ç¡®çš„å­å­—ç¬¦ä¸²çš„å•è¯ã€‚ | [code](../data_juicer/ops/mapper/remove_words_with_incorrect_substrings_mapper.py) | [tests](../tests/ops/mapper/test_remove_words_with_incorrect_substrings_mapper.py) |
| replace_content_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to replace all content in the text that matches a specific regular expression pattern with a designated replacement string. æ˜ å°„ç¨‹åºå°†æ–‡æœ¬ä¸­ä¸ç‰¹å®šæ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼åŒ¹é…çš„æ‰€æœ‰å†…å®¹æ›¿æ¢ä¸ºæŒ‡å®šçš„æ›¿æ¢å­—ç¬¦ä¸²ã€‚ | [code](../data_juicer/ops/mapper/replace_content_mapper.py) | [tests](../tests/ops/mapper/test_replace_content_mapper.py) |
| sdxl_prompt2prompt_mapper | ğŸ”¤Text ğŸš€GPU ğŸŸ¢Stable | Generate pairs of similar images by the SDXL model. é€šè¿‡SDXLæ¨¡å‹ç”Ÿæˆç›¸ä¼¼å›¾åƒå¯¹ã€‚ | [code](../data_juicer/ops/mapper/sdxl_prompt2prompt_mapper.py) | [tests](../tests/ops/mapper/test_sdxl_prompt2prompt_mapper.py) |
| sentence_augmentation_mapper | ğŸ”¤Text ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to augment sentences. æ˜ å°„å™¨æ¥å¢åŠ å¥å­ã€‚ | [code](../data_juicer/ops/mapper/sentence_augmentation_mapper.py) | [tests](../tests/ops/mapper/test_sentence_augmentation_mapper.py) |
| sentence_split_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to split text samples to sentences. æ˜ å°„å™¨å°†æ–‡æœ¬æ ·æœ¬æ‹†åˆ†ä¸ºå¥å­ã€‚ | [code](../data_juicer/ops/mapper/sentence_split_mapper.py) | [tests](../tests/ops/mapper/test_sentence_split_mapper.py) |
| text_chunk_mapper | ğŸ”¤Text ğŸ’»CPU ğŸ”—API ğŸŸ¢Stable | Split input text to chunks. å°†è¾“å…¥æ–‡æœ¬æ‹†åˆ†ä¸ºå—ã€‚ | [code](../data_juicer/ops/mapper/text_chunk_mapper.py) | [tests](../tests/ops/mapper/test_text_chunk_mapper.py) |
| video_captioning_from_audio_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to caption a video according to its audio streams based on Qwen-Audio model. æ˜ å°„å™¨æ ¹æ®åŸºäºqwen-audioæ¨¡å‹çš„éŸ³é¢‘æµä¸ºè§†é¢‘æ·»åŠ å­—å¹•ã€‚ | [code](../data_juicer/ops/mapper/video_captioning_from_audio_mapper.py) | [tests](../tests/ops/mapper/test_video_captioning_from_audio_mapper.py) |
| video_captioning_from_frames_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to generate samples whose captions are generated based on an image-to-text model and sampled video frames. æ˜ å°„å™¨ç”Ÿæˆæ ·æœ¬ï¼Œå…¶å­—å¹•æ˜¯åŸºäºå›¾åƒåˆ°æ–‡æœ¬æ¨¡å‹å’Œé‡‡æ ·çš„è§†é¢‘å¸§ç”Ÿæˆçš„ã€‚ | [code](../data_juicer/ops/mapper/video_captioning_from_frames_mapper.py) | [tests](../tests/ops/mapper/test_video_captioning_from_frames_mapper.py) |
| video_captioning_from_summarizer_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to generate video captions by summarizing several kinds of generated texts (captions from video/audio/frames, tags from audio/frames, ...). æ˜ å°„å™¨é€šè¿‡æ€»ç»“å‡ ç§ç”Ÿæˆçš„æ–‡æœ¬ (æ¥è‡ªè§†é¢‘/éŸ³é¢‘/å¸§çš„å­—å¹•ï¼Œæ¥è‡ªéŸ³é¢‘/å¸§çš„æ ‡ç­¾ï¼Œ...) æ¥ç”Ÿæˆè§†é¢‘å­—å¹•ã€‚ | [code](../data_juicer/ops/mapper/video_captioning_from_summarizer_mapper.py) | [tests](../tests/ops/mapper/test_video_captioning_from_summarizer_mapper.py) |
| video_captioning_from_video_mapper | ğŸ”®Multimodal ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to generate samples whose captions are generated based on a video-to-text model and sampled video frame. æ˜ å°„å™¨ç”Ÿæˆæ ·æœ¬ï¼Œå…¶å­—å¹•æ˜¯åŸºäºè§†é¢‘åˆ°æ–‡æœ¬æ¨¡å‹å’Œé‡‡æ ·çš„è§†é¢‘å¸§ç”Ÿæˆçš„ã€‚ | [code](../data_juicer/ops/mapper/video_captioning_from_video_mapper.py) | [tests](../tests/ops/mapper/test_video_captioning_from_video_mapper.py) |
| video_extract_frames_mapper | ğŸ”®Multimodal ğŸ’»CPU ğŸŸ¢Stable | Mapper to extract frames from video files according to specified methods. æ˜ å°„å™¨æ ¹æ®æŒ‡å®šçš„æ–¹æ³•ä»è§†é¢‘æ–‡ä»¶ä¸­æå–å¸§ã€‚ | [code](../data_juicer/ops/mapper/video_extract_frames_mapper.py) | [tests](../tests/ops/mapper/test_video_extract_frames_mapper.py) |
| video_face_blur_mapper | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Mapper to blur faces detected in videos. æ˜ å°„å™¨æ¨¡ç³Šåœ¨è§†é¢‘ä¸­æ£€æµ‹åˆ°çš„äººè„¸ã€‚ | [code](../data_juicer/ops/mapper/video_face_blur_mapper.py) | [tests](../tests/ops/mapper/test_video_face_blur_mapper.py) |
| video_ffmpeg_wrapped_mapper | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Simple wrapper for FFmpeg video filters. FFmpegè§†é¢‘è¿‡æ»¤å™¨çš„ç®€å•åŒ…è£…ã€‚ | [code](../data_juicer/ops/mapper/video_ffmpeg_wrapped_mapper.py) | [tests](../tests/ops/mapper/test_video_ffmpeg_wrapped_mapper.py) |
| video_remove_watermark_mapper | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Remove the watermarks in videos given regions. åˆ é™¤è§†é¢‘ç»™å®šåŒºåŸŸä¸­çš„æ°´å°ã€‚ | [code](../data_juicer/ops/mapper/video_remove_watermark_mapper.py) | [tests](../tests/ops/mapper/test_video_remove_watermark_mapper.py) |
| video_resize_aspect_ratio_mapper | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Mapper to resize videos by aspect ratio. æ˜ å°„å™¨æŒ‰çºµæ¨ªæ¯”è°ƒæ•´è§†é¢‘å¤§å°ã€‚ | [code](../data_juicer/ops/mapper/video_resize_aspect_ratio_mapper.py) | [tests](../tests/ops/mapper/test_video_resize_aspect_ratio_mapper.py) |
| video_resize_resolution_mapper | ğŸ¬Video ğŸ’»CPU ğŸŸ¢Stable | Mapper to resize videos resolution. æ˜ å°„å™¨æ¥è°ƒæ•´è§†é¢‘åˆ†è¾¨ç‡ã€‚ | [code](../data_juicer/ops/mapper/video_resize_resolution_mapper.py) | [tests](../tests/ops/mapper/test_video_resize_resolution_mapper.py) |
| video_split_by_duration_mapper | ğŸ”®Multimodal ğŸ’»CPU ğŸŸ¢Stable | Mapper to split video by duration. æ˜ å°„å™¨æŒ‰æŒç»­æ—¶é—´åˆ†å‰²è§†é¢‘ã€‚ | [code](../data_juicer/ops/mapper/video_split_by_duration_mapper.py) | [tests](../tests/ops/mapper/test_video_split_by_duration_mapper.py) |
| video_split_by_key_frame_mapper | ğŸ”®Multimodal ğŸ’»CPU ğŸŸ¢Stable | Mapper to split video by key frame. æ˜ å°„å™¨æŒ‰å…³é”®å¸§åˆ†å‰²è§†é¢‘ã€‚ | [code](../data_juicer/ops/mapper/video_split_by_key_frame_mapper.py) | [tests](../tests/ops/mapper/test_video_split_by_key_frame_mapper.py) |
| video_split_by_scene_mapper | ğŸ”®Multimodal ğŸ’»CPU ğŸŸ¢Stable | Mapper to cut videos into scene clips. æ˜ å°„å™¨å°†è§†é¢‘å‰ªåˆ‡æˆåœºæ™¯å‰ªè¾‘ã€‚ | [code](../data_juicer/ops/mapper/video_split_by_scene_mapper.py) | [tests](../tests/ops/mapper/test_video_split_by_scene_mapper.py) |
| video_tagging_from_audio_mapper | ğŸ¬Video ğŸš€GPU ğŸ§©HF ğŸŸ¢Stable | Mapper to generate video tags from audio streams extracted by video using the Audio Spectrogram Transformer. æ˜ å°„å™¨ä½¿ç”¨éŸ³é¢‘é¢‘è°±å›¾è½¬æ¢å™¨ä»è§†é¢‘æå–çš„éŸ³é¢‘æµç”Ÿæˆè§†é¢‘æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/video_tagging_from_audio_mapper.py) | [tests](../tests/ops/mapper/test_video_tagging_from_audio_mapper.py) |
| video_tagging_from_frames_mapper | ğŸ¬Video ğŸš€GPU ğŸŸ¢Stable | Mapper to generate video tags from frames extract by video. æ˜ å°„å™¨ä»è§†é¢‘æå–çš„å¸§ç”Ÿæˆè§†é¢‘æ ‡ç­¾ã€‚ | [code](../data_juicer/ops/mapper/video_tagging_from_frames_mapper.py) | [tests](../tests/ops/mapper/test_video_tagging_from_frames_mapper.py) |
| whitespace_normalization_mapper | ğŸ”¤Text ğŸ’»CPU ğŸŸ¢Stable | Mapper to normalize different kinds of whitespaces to whitespace ' ' (0x20) in text samples. æ˜ å°„å™¨ï¼Œç”¨äºå°†æ–‡æœ¬ç¤ºä¾‹ä¸­çš„ä¸åŒç±»å‹çš„ç©ºç™½æ ‡å‡†åŒ–ä¸ºç©ºç™½ â€œâ€ (0 x20)ã€‚ | [code](../data_juicer/ops/mapper/whitespace_normalization_mapper.py) | [tests](../tests/ops/mapper/test_whitespace_normalization_mapper.py) |

## selector <a name="selector"/>

| Operator ç®—å­ | Tags æ ‡ç­¾ | Description æè¿° | Source code æºç  | Unit tests å•æµ‹æ ·ä¾‹ |
|----------|------|-------------|-------------|------------|
| frequency_specified_field_selector | ğŸ’»CPU ğŸŸ¢Stable | Selector to select samples based on the sorted frequency of specified field. é€‰æ‹©å™¨æ ¹æ®æŒ‡å®šå­—æ®µçš„æ’åºé¢‘ç‡é€‰æ‹©æ ·æœ¬ã€‚ | [code](../data_juicer/ops/selector/frequency_specified_field_selector.py) | [tests](../tests/ops/selector/test_frequency_specified_field_selector.py) |
| random_selector | ğŸ’»CPU ğŸŸ¢Stable | Selector to random select samples. é€‰æ‹©å™¨æ¥éšæœºé€‰æ‹©æ ·æœ¬ã€‚ | [code](../data_juicer/ops/selector/random_selector.py) | [tests](../tests/ops/selector/test_random_selector.py) |
| range_specified_field_selector | ğŸ’»CPU ğŸŸ¢Stable | Selector to select a range of samples based on the sorted specified field value from smallest to largest. é€‰æ‹©å™¨æ ¹æ®ä»æœ€å°åˆ°æœ€å¤§çš„æ’åºæŒ‡å®šå­—æ®µå€¼é€‰æ‹©æ ·æœ¬èŒƒå›´ã€‚ | [code](../data_juicer/ops/selector/range_specified_field_selector.py) | [tests](../tests/ops/selector/test_range_specified_field_selector.py) |
| tags_specified_field_selector | ğŸ’»CPU ğŸŸ¢Stable | Selector to select samples based on the tags of specified field. é€‰æ‹©å™¨æ ¹æ®æŒ‡å®šå­—æ®µçš„æ ‡ç­¾é€‰æ‹©æ ·æœ¬ã€‚ | [code](../data_juicer/ops/selector/tags_specified_field_selector.py) | [tests](../tests/ops/selector/test_tags_specified_field_selector.py) |
| topk_specified_field_selector | ğŸ’»CPU ğŸŸ¢Stable | Selector to select top samples based on the sorted specified field value. é€‰æ‹©å™¨æ ¹æ®å·²æ’åºçš„æŒ‡å®šå­—æ®µå€¼é€‰æ‹©é¡¶éƒ¨æ ·æœ¬ã€‚ | [code](../data_juicer/ops/selector/topk_specified_field_selector.py) | [tests](../tests/ops/selector/test_topk_specified_field_selector.py) |


## Contributing  è´¡çŒ®

We welcome contributions of adding new operators. Please refer to [How-to Guide
for Developers](DeveloperGuide.md).

æˆ‘ä»¬æ¬¢è¿ç¤¾åŒºè´¡çŒ®æ–°çš„ç®—å­ï¼Œå…·ä½“è¯·å‚è€ƒ[å¼€å‘è€…æŒ‡å—](DeveloperGuide_ZH.md)ã€‚
